<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hadoop : DataLoader Installation from Binaries</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Hadoop : DataLoader Installation from Binaries
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Sep 04, 2013 by <font color="#0050B2">beckmj</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <p><style type='text/css'>/*<![CDATA[*/
div.rbtoc1379977090188 {padding: 0px;}
div.rbtoc1379977090188 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1379977090188 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class='toc rbtoc1379977090188'>
<ul class='toc-indentation'>
<li><a href='#DataLoaderInstallationfromBinaries-Packages'>Packages</a>
<ul class='toc-indentation'>
<li><a href='#DataLoaderInstallationfromBinaries-BinaryDistribution:'>Binary Distribution:</a></li>
</ul>
</li>
<li><a href='#DataLoaderInstallationfromBinaries-Prerequisites'>Prerequisites</a>
<ul class='toc-indentation'>
<li><a href='#DataLoaderInstallationfromBinaries-CreateUser'>Create User</a></li>
<li><a href='#DataLoaderInstallationfromBinaries-PivotalHDandZookeeperClusterInstallation'>Pivotal HD and Zookeeper Cluster Installation</a></li>
<li><a href='#DataLoaderInstallationfromBinaries-InstallJDK'>Install JDK</a></li>
</ul>
</li>
<li><a href='#DataLoaderInstallationfromBinaries-InstallDataLoader'>Install DataLoader</a>
<ul class='toc-indentation'>
<li><a href='#DataLoaderInstallationfromBinaries-DownloadandExtracttheDataLoaderBinaries'>Download and Extract the DataLoader Binaries</a></li>
</ul>
</li>
<li><a href='#DataLoaderInstallationfromBinaries-ConfigureDataLoader'>Configure DataLoader</a></li>
<li><a href='#DataLoaderInstallationfromBinaries-StartDataLoaderServices'>Start DataLoader Services</a></li>
<li><a href='#DataLoaderInstallationfromBinaries-StopDataLoaderServices'>Stop DataLoader Services</a></li>
<li><a href='#DataLoaderInstallationfromBinaries-ConfigureDataLoaderCLI'>Configure DataLoader CLI</a></li>
</ul>
</div></p><p>This document describe the deployment of DataLoader 2.0.1 using the binaries distribution.</p><p>A properly-configured Hadoop cluster is required, and HDFS, MapReduce, and Zookeeper must be available for DataLoader to use. For Hadoop/Zookeeper deployment instructions using the Pivotal HD distribution, refer to the Pivotal HD Installation and Administrator Guide.</p><h2 id="DataLoaderInstallationfromBinaries-Packages">Packages</h2><p>DataLoader is distributed as either RPM packages, or as a binary distribution. The installation procedures for the binary distribution are similar to the RPM installation. Use the installation procedure below for the binary distribution. </p><h3 id="DataLoaderInstallationfromBinaries-BinaryDistribution:">Binary Distribution:</h3><p>DataLoader uses two binary packages that are deployed to the Client and Master, nodes, which can be the same.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><td class="highlight-blue confluenceTd" data-highlight-colour="blue"><p>Package Name</p></td><td class="highlight-blue confluenceTd" data-highlight-colour="blue"><p>Description</p></td><td class="highlight-blue confluenceTd" data-highlight-colour="blue"><p>Deployment Nodes</p></td></tr><tr><td class="confluenceTd"><p>dataloader-cli-2.0.1.tar.gz</p></td><td class="confluenceTd"><p>dataloader-cli-2.0.1.tar.gz provides essential files for setting up the DataLoader client.</p></td><td class="confluenceTd"><p>Client node</p></td></tr><tr><td class="confluenceTd"><p>dataloader-service-2.0.1.tar.gz</p></td><td class="confluenceTd"><p>dataloader-service-2.0.1.tar.gz provides essential files for setting up the DataLoader master.</p></td><td class="confluenceTd"><p>Master node</p></td></tr></tbody></table></div><h2 id="DataLoaderInstallationfromBinaries-Prerequisites">Prerequisites</h2><h3 id="DataLoaderInstallationfromBinaries-CreateUser">Create User</h3><p>Two user accounts are needed for DataLoader: <em>dladmin</em> for installation and <em>dataloader</em> for running the service.</p><ol><li><p>Create the <em>dladmin</em> account on the installation host. Add dladmin to the sudoers list.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;"># vi /etc/sudoers
</pre>
</div></div><p>This should take you to a text editor with the /etc/sudoers file already opened. Add the following line to the file:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">dladmin ALL=(ALL) NOPASSWD: ALL
</pre>
</div></div><p>and save/exit the editor.</p></li><li><p>Change to the dladmin user.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[root@centos62-2 ~] su - dladmin</pre>
</div></div></li><li><p>Create a dataloader account on the master node, then add it to the root group.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 ~]$ sudo useradd dataloader
[dladmin@centos62-2 ~]$ sudo usermod -G root dataloader
</pre>
</div></div></li></ol><h3 id="DataLoaderInstallationfromBinaries-PivotalHDandZookeeperClusterInstallation">Pivotal HD and Zookeeper Cluster Installation</h3><p>To install the Pivotal HD and ZK cluster, refer to the <em>Pivotal HD Enterprise Installation and Administrator Guide</em> for deployment instructions.  </p><p>DataLoader requires additional configurationfor the HDFS cluster, as shown below.</p><p>For HDFS 1.x</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;dfs.support.append&lt;/name&gt;
    &lt;value&gt;true&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</pre>
</div></div><p>For HDFS 2.x:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">&lt;configuration&gt;
   &lt;property&gt;
      &lt;name&gt;dfs.support.append&lt;/name&gt;
      &lt;value&gt;true&lt;/value&gt;
   &lt;/property&gt;
&lt;/configuration&gt;
</pre>
</div></div><h3 id="DataLoaderInstallationfromBinaries-InstallJDK">Install JDK</h3><p>1. Install the JDK: Download and install the Oracle JDK1.6 (Java SE6 or JDK 6) from: <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" class="external-link" rel="nofollow">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><p>2. After installing the JDK, set the JAVA_HOME environment variable to point to where you installed the JDK. On a typical Linux installation with Oracle JDK 1.6, the value of this variable should be /usr/java/default/.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">export JAVA_HOME=/usr/java/default/
</pre>
</div></div><p>3. Add $JAVA_HOME/bin into your PATH environment  variable. On a Linux platform using the bash shell, add the following lines into the file ~/.bashrc:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">export PATH=$JAVA_HOME/bin:$PATH
</pre>
</div></div><h2 id="DataLoaderInstallationfromBinaries-InstallDataLoader">Install DataLoader</h2><h3 id="DataLoaderInstallationfromBinaries-DownloadandExtracttheDataLoaderBinaries">Download and Extract the DataLoader Binaries</h3><p>Create a folder named /opt/dataloader, or in another location where you want to install dataloader.<br /> Change the owner of the dataloader folder to dladmin.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 dladmin]$ sudo mkdir /opt/dataloader
[dladmin@centos62-2 opt]$ sudo chown dladmin:dladmin /opt/dataloader
</pre>
</div></div><p>Download and copy the  PHDTools tarball to /home/dladmin/ on the host. Make sure the tarball has read permission for user 'dladmin'. Extract the tarball.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 dladmin]$ wget http://hdsh129.lss.emc.com/dist/artemis/latest/PHDTools-1.0.1-bin-xx.tar.gz
[dladmin@centos62-2 dladmin]$ tar -xzvf PHDTools-1.0.1-bin-xx.tar.gz
</pre>
</div></div><p><strong>Note:</strong> xx in the Package Name is the package build number.</p><p>Copy the dataloader-service and dataloader-cli tar balls to /opt/dataloader.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 dataloader]$ cp /home/gpadmin/PHDTools-1.0.1-bin-18/dataloader/* /opt/dataloader
</pre>
</div></div><p>Untar the tar balls.</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 dataloader]$ sudo tar -xzvf dataloader-service-2.0.1.tar.gz
[dladmin@centos62-2 dataloader]$ sudo tar -xzvf dataloader-cli-2.0.1.tar.gz
</pre>
</div></div><p>The following code sample shows the structure of the directories and files that appear under /opt/dataloader</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 dataloader]$ ls -l
total 178956
drwxr-xr-x 2 dladmin dladmin      4096 Jul  2 05:59 bin
drwxr-xr-x 4 dladmin dladmin      4096 Jul  2 06:02 conf
drwxrwxr-x 3 dladmin dladmin      4096 Jul  2 06:03 data
-rw-r--r-- 1 dladmin dladmin  18726533 Jul  2 05:58 dataloader-cli-2.0.1.tar.gz
-rw-r--r-- 1 dladmin dladmin 164491899 Jul  2 05:58 dataloader-service-2.0.1.tar.gz
drwxr-xr-x 9 dladmin dladmin      4096 Jun 25 10:01 lib
drwxrwxr-x 2 dladmin dladmin      4096 Jul  2 06:03 log
drwxrwxr-x 2 dladmin dladmin      4096 Jul  2 06:03 pid
drwxr-xr-x 5 dladmin dladmin      4096 Jun 25 10:07 plugins
</pre>
</div></div><p>Change the ownership of the base folder so that its owner is dataloader:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 dataloader] sudo chown -R dataloader:dataloader /opt/dataloader
</pre>
</div></div><h2 id="DataLoaderInstallationfromBinaries-ConfigureDataLoader">Configure DataLoader</h2><p>Based on the installation directory you specified in the dl-cluster.conf file and your PHD/ZK cluster configuration, modify this file to configure DataLoader, as shown:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">[dladmin@centos62-2 dataloader] sudo vi /opt/dataloader/conf/dataloader-env.sh
</pre>
</div></div><p>The following configuration options must be modified to run DataLoader in distributed mode. If no default is given, the option must be specified.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="highlight-blue confluenceTh" data-highlight-colour="blue"><p>Parameter</p></th><th class="highlight-blue confluenceTh" data-highlight-colour="blue"><p>Explanation</p></th><th class="highlight-blue confluenceTh" data-highlight-colour="blue"><p>Default value</p></th><th class="highlight-blue confluenceTh" data-highlight-colour="blue"><p>Options</p></th></tr><tr><td class="confluenceTd"><p>DATALOADER_ZK_QUORUM</p></td><td class="confluenceTd"><p>List of Zookeeper nodes in comma separated format.  This must be the same as used in the Zookeeper cluster configuration, which is usually found in the zk_cfg file.</p></td><td class="confluenceTd"><p>None. Must be specified</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>DATALOADER_SERVICE_IP</p></td><td class="confluenceTd"><p>IP address the services will bind to. &quot;localhost&quot; cannot be used.</p></td><td class="confluenceTd"><p>Must be specified except when running standalone mode, when CLI is installed on the service node.</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>EXECUTOR_TYPE</p></td><td class="confluenceTd"><p>Hadoop cluster version that DataLoader is running on. DataLoader supports Hadoop 1.0 (GPHD 1.2) and Hadoop 2.0(PHD 1.x) . Other distributions, including Apache, have not been not tested.</p></td><td class="confluenceTd"><p>mrv2</p></td><td class="confluenceTd"><p>mrv1/mrv2</p></td></tr><tr><td class="confluenceTd"><p>HADOOP_INSTALL</p></td><td class="confluenceTd"><p>The Hadoop installation directory. DataLoader uses it to set the classpath. Make sure this value is set correctly.</p></td><td class="confluenceTd"><p>$ <a class="createlink" href="/pages/createpage.action?spaceKey=GPHD&amp;title=HADOOP_INSTALL&amp;linkCreation=true&amp;fromPageId=59608399">HADOOP_INSTALL</a></p><p>If this shell env variable is not exported, or the value is empty, the parameter must be specified manually.</p></td><td class="confluenceTd"><p>N/A</p></td></tr><tr><td class="confluenceTd"><p>HADOOP_CONF_DIR</p></td><td class="confluenceTd"><p>The Hadoop configuration directory .If you are using install_worker in the tarball to install the worker, this value must be set. Otherwise, setting this parameter optional</p></td><td class="confluenceTd"><p>$<a class="createlink" href="/pages/createpage.action?spaceKey=GPHD&amp;title=HADOOP_CONF_DIR&amp;linkCreation=true&amp;fromPageId=59608399">HADOOP_CONF_DIR</a></p><p><span>If this shell env variable is not exported, or the value is empty, the parameter must be specified manually.</span></p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p>DATALOADER_EXECUTOR_CAPACITY</p></td><td class="confluenceTd"><p>The total number of slots (MRv1) or containers (MRv2) that are available to DataLoader. This value must be set for DataLoader to run correctly.</p></td><td class="confluenceTd"><p>No default value, must be specified except when using Standalone mode.</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p>DATALOADER_DATA_DIR</p></td><td class="confluenceTd"><p>The location where DataLoader data files are placed.</p></td><td class="confluenceTd"><p>In tarball installation, this parameter is set to $[DATALOADER_HOME/data (/opt/dataloader/data)</p></td><td class="confluenceTd"><p> </p></td></tr><tr><td class="confluenceTd"><p>DATALOADER_LOG_DIR</p></td><td class="confluenceTd"><p>The location where DataLoader log files are place.</p></td><td class="confluenceTd"><p>In tarball installation, this parameter is set to $[DATALOADER_HOME/log <br /> /opt/dataloader/log)</p></td><td class="confluenceTd"><p> </p></td></tr></tbody></table></div><h2 id="DataLoaderInstallationfromBinaries-StartDataLoaderServices">Start DataLoader Services</h2><ol><li><p>Change the file ownership for the Linux account login. Change the permission of the  /etc/shadow  file to be readable by the root group:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo chmod g+r /etc/shadow
</pre>
</div></div></li><li><p>Login to the DataLoader master node as <span style="color: rgb(0,0,0);">dladmin</span>, and go to the /bin directory of the DataLoader install location:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$su - dladmin
$cd /opt/dataloader/bin/
</pre>
</div></div></li></ol><p>DataLoader supports Standalone mode without needing an existing Hadoop cluster. To start DataLoader service in Standalone mode:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo -u dataloader ./dataloader.sh start -s
</pre>
</div></div><p>To start DataLoader service In pseudo-distributed mode:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo -u dataloader ./dataloader.sh start -p
</pre>
</div></div><p>To start DataLoader service in distributed mode:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo -u dataloader ./dataloader.sh start -d
</pre>
</div></div><h2 id="DataLoaderInstallationfromBinaries-StopDataLoaderServices">Stop DataLoader Services</h2><p>To stop DataLoader service:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: java; gutter: false" style="font-size:12px;">$ sudo -u dataloader ./dataloader.sh stop
</pre>
</div></div><p> </p><h2 id="DataLoaderInstallationfromBinaries-ConfigureDataLoaderCLI">Configure DataLoader CLI</h2><p>To use the DataLoader CLI for managing jobs and datastores, CLI must be configured for use.<br /> The CLI configuration file is found at: $<a class="createlink" href="/pages/createpage.action?spaceKey=GPHD&amp;title=DATALOADER_HOME&amp;linkCreation=true&amp;fromPageId=59608399">DATALOADER_HOME</a>/conf/dataloader-cli.conf. It is a text file with key/value pair content. Its contents are shown below.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh"><p>Name</p></th><th class="confluenceTh"><p>Default value</p></th><th class="confluenceTh"><p>Description</p></th></tr><tr><td class="confluenceTd"><p>dataloader.api.url</p></td><td class="confluenceTd"><p><a href="http://localhost:12321/" class="external-link" rel="nofollow">http://localhost:12321/</a></p></td><td class="confluenceTd"><p>This is the location of the DataLoader scheduler's restful interface address. If CLI is installed on the same machine as the Dataloader service package, this value doesn't need to be changed.</p></td></tr><tr><td class="confluenceTd"><p>dataloader.zk.address</p></td><td class="confluenceTd"><p>localhost:12181</p></td><td class="confluenceTd"><p>This is the ZooKeeper address used by DataLoader service. If you are running in Standalone mode, this value doesn't need to be changed; otherwise, change the value to the actual ZooKeeper addresses: for example: <em>host1:2181,host2:2181</em></p></td></tr><tr><td class="confluenceTd"><p>dataloader.cli.queue.max.buffer</p></td><td class="confluenceTd"><p>32768</p></td><td class="confluenceTd"><p>The maximum number of un-acknowledged messages held in the client</p></td></tr></tbody></table></div><p>If using pseudo-distributed mode, you can use default values, provided you are not using an external Zookeeper.</p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://confluence.greenplum.com/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Sep 23, 2013 15:58</small></p>
            </div>
        </div>     </body>
</html>
