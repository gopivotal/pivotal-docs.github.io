<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hadoop : DataLoader Command Line Interface</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="page">
            <div id="main">
                <div id="main-header" class="pageSectionHeader">
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Hadoop : DataLoader Command Line Interface
                        </span>
                    </h1>

                    <div class="page-metadata">
                        <p>This page last changed on Sep 05, 2013 by <font color="#0050B2">beckmj</font>.</p>
                    </div>
                </div>

                <div id="content" class="view">
                    <div id="main-content" class="wiki-content group">
                    <h1 id="DataLoaderCommandLineInterface-DirectoryStructure">Directory Structure</h1><p>The files for the DataLoader Command Line Reference are installed in the same folder as DataLoader service. By default the base directory is /usr/local/gphd/dataloader-2.0.1.</p><p>This package has no dependency on other DataLoader components. <br />The structure of this directory is as follows:</p><p>${dataloader_HOME}/<br /> bin/<br /> conf/<br /> lib/cli<br /> lib/cli/lib</p><p>The bin folder contains the dataloader-cli.sh script.<br />The conf folder contains the configuration files for this component. <br />The lib/cli folder contains the dataloader-cli**.jar and the folder lib/cli/lib contains the other required libraries.</p><h1 id="DataLoaderCommandLineInterface-DataLoaderCommands">DataLoader Commands</h1><p>The DataLoader client utility, dataloader-client.sh, supports multiple commands and associated options.</p><h4 id="DataLoaderCommandLineInterface-CommandFormat:">Command Format:</h4><p>dataloader-cli.sh [COMMAND] [OPTIONS]</p><p>The DataLoader utility supports the following commands:</p><p><strong>submit</strong>: used in submiting DataLoader jobs<br /><strong>suspend</strong>: used to suspend/resume, cancel, or query a job<br /><strong>config</strong>: configures DataLoader instances<br /><strong>pstream</strong>: pushes data from STDIN to Dataloader pushstream job<br /><strong>pcat</strong>: pushes data from the specified file to Dataloader pushstream job<br /><strong>ptail</strong>: pushes data from the specified file to Dataloader pushstream job<br /><strong>scan</strong>: pushes data from specified folder to Dataloader pushstream job<br /><strong>tail</strong>: the command to push data from STDIN to Dataloader pushstream job, has been deprecated.</p><h1 id="DataLoaderCommandLineInterface-dataloader-cli.sh">dataloader-cli.sh</h1><p>This is the DataLoader client utility and commands are given in the following format:</p><p>dataloader-cli.sh [COMMAND] [OPTIONS]</p><p>You must create a specification file before using the submit command to submit the DataLoader job specification.<br />The DataLoader command requires the following options:</p><pre>$ dataloader-cli.sh submit -i &lt;transfer specification&gt; [-s &lt;strategy&gt;, -m &lt;mapper number&gt;, -b &lt;bandwidth&gt;, -k true|false, -c &lt;chunking size&gt;, -t true|false, -o true|false, -z]</pre><p>Refer to the Submit options and descriptions below for a full description of the options.</p><p>Sample DataLoader command:</p><pre>dataloader-cli.sh submit -i myfileset.xml -k true -o true -c 512M -m 24 -b 2M -s intelligent</pre><h1 id="DataLoaderCommandLineInterface-DataLoaderCommands.1">DataLoader Commands</h1><h2 id="DataLoaderCommandLineInterface-submitCommand">submit Command</h2><p>You can expect the following when you issue this command:</p><ul><li>To receive a job id.</li><li>Receive an error in the console window if the job fails</li></ul><p>The following table provides a quick summary of the available CLI options for the <strong>submit</strong> command. </p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Options</th><th class="confluenceTh">Option Description</th></tr><tr><td class="confluenceTd">-b, --bandwidth &lt;arg&gt;</td><td class="confluenceTd">Maximum bandwidth each worker can use.</td></tr><tr><td class="confluenceTd">-B, --is-bandwidth-throttle &lt;arg&gt;</td><td class="confluenceTd">Whether bandwidth throttling should be enabled: true or false.</td></tr><tr><td class="confluenceTd">-c, --chunksize &lt;arg&gt;</td><td class="confluenceTd">Chunk size to split files into, if chunking is enabled.</td></tr><tr><td class="confluenceTd">-D, --stream-data-durability &lt;arg&gt;</td><td class="confluenceTd">Whether checkpointing should be enabled for streaming data durability, default value is false.</td></tr><tr><td class="confluenceTd">-i, --input</td><td class="confluenceTd">Path to the copy job spec file.</td></tr><tr><td class="confluenceTd">-k, --chunking &lt;arg&gt;</td><td class="confluenceTd">Whether data chunking in enabled: true or false.</td></tr><tr><td class="confluenceTd">-m, --mappernum &lt;arg&gt;</td><td class="confluenceTd">Number of mappers used to do the transfer. Deprecated, use --workernum instead.</td></tr><tr><td class="confluenceTd">-M, --max-disk-mapper &lt;arg&gt;</td><td class="confluenceTd">Maximum mappers that can be started for one disk. Deprecated. Use workers-per-disk instead</td></tr><tr><td class="confluenceTd">-N, --name &lt;arg&gt;</td><td class="confluenceTd">Job name</td></tr><tr><td class="confluenceTd">-o, --overwrite &lt;arg&gt;</td><td class="confluenceTd">When specified, the target file will be overwritten if it already exists at the destination. Otherwise, file copy will be skipped.</td></tr><tr><td class="confluenceTd">-p, --policyfile &lt;arg&gt; </td><td class="confluenceTd">Path to the configuration file that specifies the transfer policy.</td></tr><tr><td class="confluenceTd">-s,--strategy &lt;arg&gt;</td><td class="confluenceTd">Copy strategy to be used: intelligent, localfs, locality, uniform, etc.</td></tr><tr><td class="confluenceTd">-s,--sourcepath &lt;arg&gt;</td><td class="confluenceTd">Directory path at source</td></tr><tr><td class="confluenceTd">-s,--sourceuri &lt;arg&gt;</td><td class="confluenceTd">URI of the source data store.</td></tr><tr><td class="confluenceTd">-t,--chunkingthreshold &lt;arg&gt;</td><td class="confluenceTd">Minimum file size to chunk, if chunking is enabled.</td></tr><tr><td class="confluenceTd">-t, --targetpath &lt;arg&gt;</td><td class="confluenceTd">Target copy directory path at destination.</td></tr><tr><td class="confluenceTd">-t, --targeturi &lt;arg&gt;</td><td class="confluenceTd">URI of the target data store</td></tr><tr><td class="confluenceTd">-w,--workernum &lt;arg&gt;</td><td class="confluenceTd">Number or workers to perform the copy</td></tr><tr><td class="confluenceTd">-w, --workers-per-disk &lt;arg&gt; </td><td class="confluenceTd">Maximum workers that can be started for one disk</td></tr><tr><td colspan="1" class="confluenceTd">-z,--compress </td><td colspan="1" class="confluenceTd">When specified, compress data using Snappy codec. </td></tr></tbody></table></div><p><span style="color: rgb(0,0,0);font-size: 20.0px;line-height: 1.5;">Job Operation Options</span></p><p>Job operation means to suspend/resume/cancel/query a job.</p><h5 id="DataLoaderCommandLineInterface-Suspend">Suspend</h5><p>To suspend a DataLoader data transfer job, enter:</p><pre>dataloader-cli.sh suspend -n &lt;jobid&gt;</pre><p>You can expect the following when you issue this command:</p><p><br />To receive an error if the specified job does not exist or is not running.</p><ul><li>Suspends the target job</li><li>The options for this operation are as follows:</li></ul><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">n (-jobid)</td><td class="confluenceTd">String</td><td class="confluenceTd">n/a</td><td class="confluenceTd">This value is required. Contains ID of the job to suspend.</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-Resume"><span style="color: rgb(61,61,61);line-height: 1.6666666;">Resume</span></h5><p>To resume a suspended or failed DataLoader data transfer job, enter</p><pre>dataloader-cli.sh resume -n &lt;jobid&gt;</pre><p>You can expect the following when you issue this command:</p><ul><li>To resume the target job.</li><li>To receive an error if the specified job does not exist or is in an unexpected state.</li></ul><p>The options for this operation are as follows</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">n (-jobid)</td><td class="confluenceTd">String</td><td class="confluenceTd">n/a</td><td class="confluenceTd">This value is required. Contains ID of the job to resume.</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-Stop">Stop</h5><p>To stop a DataLoader data transfer job, enter:</p><pre>dataloader-cli.sh stop -n &lt;jobid&gt;</pre><p>You can expect the following when you issue this command:</p><ul><li>To stop the target job. A stopped job cannot be resumed.</li><li>To receive an error message if the specified job does not exist or if the job has already stopped.</li></ul><p>The options for this operation are as follows:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">n (-jobid)</td><td class="confluenceTd">String</td><td class="confluenceTd">n/a</td><td class="confluenceTd">This value is required. Contains ID of the job to stop.</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-Query"><span style="color: rgb(61,61,61);line-height: 1.6666666;"><br />Query</span></h5><p>You can query the progress of a specified data transfer job.</p><pre>dataloader-cli.sh query -n &lt;jobid&gt;</pre><p>You can expect the following when you issue this command:</p><ul><li>To receive status for the specified job.</li><li>If Map Reduce is running, to receive the progress of the transfer.</li><li>To receive an error if the specified job does not exist.</li></ul><p>The options for this operation are as follows</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">-n (--jobid)</td><td class="confluenceTd">String</td><td class="confluenceTd">n/a</td><td class="confluenceTd">This value is required. Contains ID of the job to query.</td></tr><tr><td colspan="1" class="confluenceTd">-status</td><td colspan="1" class="confluenceTd">enum(RUNNING, STARTED, SUSPENDED, COMPLETED, FAILED</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">Job status</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-List">List</h5><p>To list all the running and completed jobs, enter:</p><pre>dataloader-cli.sh list --status &lt;options&gt;</pre><p>The options for this operation are as follows</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"> -sttus</td><td class="confluenceTd"><span style="line-height: 1.4285715;">One of the following:</span><br /><p>STARTED<br />COMPLETED<br />CANCELED<br />SUSPENDED<br />RUNNING</p></td><td class="confluenceTd"> n/a</td><td class="confluenceTd"> Job status</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-Config">Config</h5><p>To see a full list of registered datastores, use the command:</p><pre>dataloader-cli.sh config --command list</pre><p>To register a new datastore:</p><pre>dataloader-cli.sh config --command register -i &lt;property_field&gt;</pre><p>To remove an existing datastore:</p><pre>dataloader-cli.sh config --command delete -n &lt;datastore _ID&gt;</pre><p>The options for this operation are as follows</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">-command</td><td class="confluenceTd"><p>One of the following:</p><ul><li>list</li><li>register</li><li>delete</li></ul></td><td class="confluenceTd">n/a</td><td class="confluenceTd"><p>Configures the data store.</p><p> </p></td></tr><tr><td colspan="1" class="confluenceTd">-i (/)</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">This is required for the register option. The name of the property file.</td></tr><tr><td colspan="1" class="confluenceTd">-n <span>(/)</span></td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Required for the delete command.</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-pstream:">pstream:</h5><p>To send data from STDIN to a running pushstream job, enter:</p><pre>dataloader-cli.sh pstream -n &lt;jobid&gt;</pre><p>The options for this operation are as follows</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">-n (–jobid)</td><td class="confluenceTd">String</td><td class="confluenceTd">n/a</td><td class="confluenceTd">The id of the push steam job to which data is pushed.</td></tr><tr><td colspan="1" class="confluenceTd">-q --queue-size &lt;arg&gt;</td><td colspan="1" class="confluenceTd">Integer</td><td colspan="1" class="confluenceTd">32768</td><td colspan="1" class="confluenceTd">The maximum number of unacknowledged messages that are allowed to be held on the client side.</td></tr><tr><td colspan="1" class="confluenceTd">-format</td><td colspan="1" class="confluenceTd">enum (TEXT, AVRO)</td><td colspan="1" class="confluenceTd">TEXT</td><td colspan="1" class="confluenceTd">The format of the input file/stream.</td></tr><tr><td colspan="1" class="confluenceTd">--delimiter</td><td colspan="1" class="confluenceTd">enum(NEW_LINE TAB EMPTY_SPACE COMMA SEMICOLON COLON DOT)</td><td colspan="1" class="confluenceTd">NEW_LINE</td><td colspan="1" class="confluenceTd">The delimiter used to split the input file. Only used when the &quot;format&quot; option is &quot;TEXT&quot;.</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-scan">scan</h5><p>To send data from a folder to a running pushstream job enter:</p><pre>dataloader-cli.sh scan -n &lt;jobid&gt; --scanfolder &lt;folder_to_scan&gt;</pre><p>The options for this operation are as follows:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">-n (--jobid)</td><td class="confluenceTd">String</td><td class="confluenceTd">n/a</td><td class="confluenceTd">The id of the push steam job to which data is pushed.</td></tr><tr><td colspan="1" class="confluenceTd">--scanfolder</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The folder to be scanned for data to push to the DataLoader job</td></tr><tr><td colspan="1" class="confluenceTd">-q --queue-size &lt;arg&gt;</td><td colspan="1" class="confluenceTd">Integer</td><td colspan="1" class="confluenceTd">32768</td><td colspan="1" class="confluenceTd">The maximum number of unacknowledged messages that are allowed to be held on the client side.</td></tr><tr><td colspan="1" class="confluenceTd">--idle</td><td colspan="1" class="confluenceTd">Long</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">If the file has not been changed for this period of time, the file is considered as finished. Only valid in ptail/scan(if tailing is enabled).</td></tr><tr><td colspan="1" class="confluenceTd">--tailing</td><td colspan="1" class="confluenceTd">Boolean</td><td colspan="1" class="confluenceTd">false</td><td colspan="1" class="confluenceTd">Only valid in scan command. If specified, the files in the scan folder will be monitored for changes.</td></tr><tr><td colspan="1" class="confluenceTd">--thread-pool-size</td><td colspan="1" class="confluenceTd">Integer</td><td colspan="1" class="confluenceTd">5</td><td colspan="1" class="confluenceTd">The maximum number of concurrent threads that can be used for processing files. Only valid in scan command.</td></tr><tr><td colspan="1" class="confluenceTd">--format</td><td colspan="1" class="confluenceTd">enum (TEXT, AVRO)</td><td colspan="1" class="confluenceTd">TEXT</td><td colspan="1" class="confluenceTd">The format of the input file/stream.</td></tr><tr><td colspan="1" class="confluenceTd">--delimiter</td><td colspan="1" class="confluenceTd">enum (NEW_LINE TAB EMPTY_SPACE COMMA SEMICOLON COLON DOT)</td><td colspan="1" class="confluenceTd">NEW_LINE</td><td colspan="1" class="confluenceTd">The delimiter used to split the input file. Only used when the &quot;format&quot; option is &quot;TEXT&quot;.</td></tr></tbody></table></div><h5 id="DataLoaderCommandLineInterface-ptail">ptail</h5><p>To send data from a folder to a running pushstream job enter:</p><pre>dataloader-cli.sh ptail -n &lt;jobid&gt; --source &lt;inputfile&gt;</pre><p>The options for this operation are as follows:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">-n (--jobid)</td><td class="confluenceTd">String</td><td class="confluenceTd">n/a</td><td class="confluenceTd">The id of the push steam job to which data is pushed.</td></tr><tr><td colspan="1" class="confluenceTd">--format</td><td colspan="1" class="confluenceTd">enum (TEXT, AVRO)</td><td colspan="1" class="confluenceTd">TEXT</td><td colspan="1" class="confluenceTd">The format of the input file/stream.</td></tr><tr><td colspan="1" class="confluenceTd">--delimiter</td><td colspan="1" class="confluenceTd"><span>enum (NEW_LINE TAB EMPTY_SPACE COMMA SEMICOLON COLON DOT)</span></td><td colspan="1" class="confluenceTd">NEW_LINE</td><td colspan="1" class="confluenceTd">The delimiter used to split the input file. Only used when the &quot;format&quot; option is &quot;TEXT&quot;.</td></tr><tr><td colspan="1" class="confluenceTd">--source</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The file to be  processed. Only valid for pcat/ptail.</td></tr><tr><td colspan="1" class="confluenceTd">--idle</td><td colspan="1" class="confluenceTd">long</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">If the file has not been changed for this period of time, the file is considered as finished. Only valid in ptail/scan(if tailing is enabled).</td></tr></tbody></table></div><h3 id="DataLoaderCommandLineInterface-Toregister/unregisterdatastores">To register/unregister datastores</h3><p>The following command options are used for managing registration of the datastores.</p><p>The options for this operation are as follows:</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Job Option Name</th><th class="confluenceTh">Value Type</th><th class="confluenceTh">Default</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd">-command</td><td class="confluenceTd"><p>enum (register,delete,list) </p></td><td class="confluenceTd">n/a</td><td class="confluenceTd"><p>The command to list, register a datastore, or delete a datastore.</p></td></tr><tr><td colspan="1" class="confluenceTd">-i (--input) </td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">The file that contains the datastore properties. Only used when command is &quot;register&quot;</td></tr><tr><td colspan="1" class="confluenceTd">-n</td><td colspan="1" class="confluenceTd">String</td><td colspan="1" class="confluenceTd">n/a</td><td colspan="1" class="confluenceTd">Required for the delete command. The ID of the datastore to be deleted. ID of the datastore can be found via the command list. Only used when command is &quot;delete&quot;. </td></tr></tbody></table></div><p> </p><p> </p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" style="background: url(http://confluence.greenplum.com/images/border/border_bottom.gif) repeat-x;">
                <p><small>Document generated by Confluence on Sep 23, 2013 15:58</small></p>
            </div>
        </div>     </body>
</html>
